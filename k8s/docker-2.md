# k8s

1. 容器里运行的进程实际仍运行在宿主机操作系统内部，但是容器里的进程和其他容器进程、宿主机操作系统中的进程相关隔离。

2. 和虚拟机相比：
   
   - 更加轻量级 ： 虚机器需要运行自己的一组系统进程，而容器仅在宿主机上运行单个进程
   - 更加高效：虚拟机需要将宿主机物理硬件资源分为较小的虚拟硬件资源，运行在虚拟机里的应用程序会执行虚拟机操作系统的系统调用，然后虚拟机内核通过管理程序在宿主机CPU上执行命令；容器直接使用宿主机的内核，运行在宿主机操作系统上。
   - 虚拟机提供完全隔离的环境，每个虚拟机运行在自己的linux内核上；容器调用同一个内核，会有安全隐患。
  
3. 容器如何实现隔离？
   
   - linux命名空间，每个进程只能看到自己的系统视图（文件，进程，网络接口）。
   - linux控制组，限制进程使用的资源（CPU，内存，网络带宽）

4. Docker
   
   docker是一个打包（镜像）、分发（镜像仓库）以及运行（容器）应用程序的平台。docker 允许将应用程序和应用程序依赖的环境打包在一起。

   镜像层：镜像由多层构成，不同的镜像可能包含完全相同的层。每一层仅仅被存一次，当机遇相同基础层的镜像被创建成两个容器时，它们就能读相同的文件。容器镜像层是只读的。

   镜像分层：
   
   - 镜像由多层组成，不能的镜像可能会共享封层。
   - 所有的组成基础镜像的分层只会被存储一次，拉取镜像的时候，docker会独立下载每一层，并且只会下载未被存储在本地的分层。
   - 构建镜像的时候，docker中每一条独立的指令都会被创建一个新层。最后一层会被打上标签。
   - 构建完成，镜像存储在本地。

5. 常用的容器命令
   docker run 启动镜像，运行容器
   docker ps 列出所有运行中的容器
   docker exec 在容器中运行命令
   docker stop 停止容器：停止容器内运行的进程，但是容器本身还存在
   docker rm 删除容器
   docker tag 给镜像打标签
   docker push 向仓库推送镜像